# 服务器配置
server.port=8080
server.servlet.context-path=/
server.error.include-message=always
spring.mvc.hiddenmethod.filter.enabled=true

# 数据库配置
spring.datasource.url=jdbc:mysql://localhost:3306/multidoc?useSSL=false&useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai
spring.datasource.username=root
spring.datasource.password=769954602
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA/Hibernate 配置
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.hbm2ddl.auto=none
spring.jpa.properties.hibernate.hbm2ddl.import_files_sql_extractor=org.hibernate.tool.hbm2ddl.MultipleLinesSqlCommandExtractor
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.connection.charSet=UTF-8
spring.jpa.properties.hibernate.connection.characterEncoding=UTF-8
spring.jpa.properties.hibernate.connection.useUnicode=true
spring.jpa.properties.hibernate.connection.zeroDateTimeBehavior=convertToNull
spring.jpa.properties.hibernate.connection.allowMultiQueries=true
spring.jpa.properties.hibernate.connection.rewriteBatchedStatements=true
spring.jpa.properties.hibernate.connection.cachePrepStmts=true
spring.jpa.properties.hibernate.connection.prepStmtCacheSize=250
spring.jpa.properties.hibernate.connection.prepStmtCacheSqlLimit=2048
spring.jpa.properties.hibernate.connection.useServerPrepStmts=true
spring.jpa.properties.hibernate.connection.useLocalSessionState=true
spring.jpa.properties.hibernate.connection.cacheResultSetMetadata=true
spring.jpa.properties.hibernate.connection.cacheServerConfiguration=true
spring.jpa.properties.hibernate.connection.elideSetAutoCommits=true
spring.jpa.properties.hibernate.connection.maintainTimeStats=false
spring.jpa.properties.hibernate.connection.dontTrackOpenResources=true
spring.jpa.properties.hibernate.connection.autoReconnect=true
spring.jpa.properties.hibernate.connection.autoReconnectForPools=true
spring.jpa.properties.hibernate.connection.is-connection-validation-required=true
spring.jpa.properties.hibernate.connection.test-while-idle=true
spring.jpa.properties.hibernate.connection.test-on-borrow=true
spring.jpa.properties.hibernate.connection.validation-query=SELECT 1
spring.jpa.properties.hibernate.connection.validation-interval=30000
spring.jpa.properties.hibernate.connection.connection-timeout=30000
spring.jpa.properties.hibernate.connection.idle-timeout=30000
spring.jpa.properties.hibernate.connection.max-lifetime=1800000
spring.jpa.properties.hibernate.connection.minimum-idle=5
spring.jpa.properties.hibernate.connection.maximum-pool-size=20
spring.jpa.properties.hibernate.connection.pool-name=HikariCP
spring.jpa.properties.hibernate.connection.leak-detection-threshold=30000
spring.jpa.properties.hibernate.connection.connection-init-sql=SET NAMES utf8mb4
spring.jpa.properties.hibernate.connection.connection-init-sql=SET FOREIGN_KEY_CHECKS=0

# 数据初始化
spring.sql.init.mode=never
spring.sql.init.schema-locations=classpath:schema.sql
spring.sql.init.continue-on-error=false
spring.jpa.defer-datasource-initialization=true

# 文件上传配置
spring.servlet.multipart.max-file-size=100MB
spring.servlet.multipart.max-request-size=100MB
spring.servlet.multipart.enabled=true

# 文件存储路径
app.file-storage.word-upload-path=./uploads/word
app.file-storage.excel-upload-path=./uploads/excel
app.upload.word-dir=./uploads/word
app.upload.excel-dir=./uploads/excel

# 文档分块配置
app.chunk.max-size=5000
app.chunk.overlap-size=500

# 日志配置
logging.level.root=INFO
logging.level.com.example=DEBUG
logging.level.org.hibernate.SQL=ERROR
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=ERROR
logging.level.org.hibernate.type.descriptor.sql=ERROR
logging.level.org.hibernate.orm.deprecation=ERROR
logging.level.org.hibernate.jpa.internal.util=ERROR
logging.level.org.hibernate.engine.jdbc.spi=ERROR
logging.level.org.hibernate.engine.jdbc.internal=ERROR
logging.level.org.hibernate.engine.jdbc=ERROR
logging.level.org.hibernate.engine.transaction.internal=ERROR
logging.level.org.hibernate.engine.transaction=ERROR
logging.level.org.hibernate.resource.transaction=ERROR
logging.level.org.hibernate.resource.jdbc=ERROR
logging.level.org.hibernate.resource=ERROR
logging.level.org.hibernate.stat=ERROR
logging.level.org.hibernate.tool.schema=ERROR
logging.level.org.hibernate.validator=ERROR
logging.level.org.hibernate.annotations=ERROR
logging.level.org.hibernate.boot=ERROR
logging.level.org.hibernate.boot.model=ERROR
logging.level.org.hibernate.boot.registry=ERROR
logging.level.org.hibernate.boot.spi=ERROR
logging.level.org.hibernate.cache=ERROR
logging.level.org.hibernate.collection=ERROR
logging.level.org.hibernate.engine=ERROR
logging.level.org.hibernate.event=ERROR
logging.level.org.hibernate.id=ERROR
logging.level.org.hibernate.internal=ERROR
logging.level.org.hibernate.jdbc=ERROR
logging.level.org.hibernate.loader=ERROR
logging.level.org.hibernate.mapping=ERROR
logging.level.org.hibernate.metamodel=ERROR
logging.level.org.hibernate.persister=ERROR
logging.level.org.hibernate.proxy=ERROR
logging.level.org.hibernate.query=ERROR
logging.level.org.hibernate.service=ERROR
logging.level.org.hibernate.tool=ERROR
logging.level.org.hibernate.transaction=ERROR
logging.level.org.hibernate.type=ERROR
logging.level.org.hibernate.validator=ERROR
logging.level.org.springframework=WARN
logging.level.org.springframework.web=WARN
logging.level.org.springframework.boot=WARN
logging.level.org.springframework.security=WARN
logging.level.org.springframework.transaction=WARN
logging.level.org.springframework.jdbc=WARN
logging.level.org.springframework.orm=WARN
logging.level.org.springframework.data=WARN
logging.level.org.springframework.cache=WARN
logging.level.org.springframework.context=WARN
logging.level.org.springframework.core=WARN
logging.level.org.springframework.beans=WARN
logging.level.org.springframework.aop=WARN
logging.level.org.springframework.aspects=WARN
logging.level.org.springframework.test=WARN
logging.level.org.springframework.util=WARN
logging.level.org.springframework.validation=WARN
logging.level.org.springframework.web.servlet=WARN
logging.level.org.springframework.web.filter=WARN
logging.level.org.springframework.web.context=WARN
logging.level.org.springframework.web.method=WARN
logging.level.org.springframework.web.bind=WARN
logging.level.org.springframework.web.client=WARN
logging.level.org.springframework.web.reactive=WARN
logging.level.org.springframework.web.server=WARN
logging.level.org.springframework.web.socket=WARN
logging.level.org.springframework.web.util=WARN
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Thymeleaf配置
spring.thymeleaf.cache=false
spring.thymeleaf.mode=HTML
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html

# OpenAI配置
spring.ai.openai.api-key=sk-d6dc9cf9d8dd496aab675fcd3b9fab23
spring.ai.openai.chat.model=deepseek-chat
spring.ai.openai.chat.temperature=0.2
spring.ai.openai.chat.max-tokens=8000
spring.ai.openai.base-url=https://api.deepseek.com
spring.ai.openai.chat.top-p=1.0
spring.ai.openai.chat.frequency-penalty=0.0
spring.ai.openai.chat.presence-penalty=0.0

# OpenAI API超时和重试配置
spring.ai.openai.client.connect-timeout=240000
spring.ai.openai.client.read-timeout=240000
spring.ai.openai.client.max-retries=5
spring.ai.openai.client.retry-backoff-initial-interval=5000
spring.ai.openai.client.retry-backoff-multiplier=2.0
spring.ai.openai.client.retry-backoff-max-interval=60000

# 应用程序特定配置
app.chunk-size=2000
app.chunk-overlap=400
app.max-related-fields=5 

# 允许的Word文档扩展名
app.allowed-word-extensions=.docx,.doc